
<!DOCTYPE html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<style>

body{
  max-width: 800px;
  margin: 0px auto;
}

section {
  background: white;
  font-family: monospace;
  height: 150px;
  opacity: .1;
}

section.active{
  opacity: 1;
}

#overlay{
  position: fixed;
  height: 150px;
  border-bottom: lightgray 1px solid;
  z-index: 1;
}

#overlay-space{
  height: 150px;
  content: ".";
  display: block;
  width: 800px;
}

circle{
  fill: steelblue;
  fill-opacity: .9;
  stroke: darkgray;
}

</style>

<div id='overlay'></div>
<div id='overlay-space'></div>

<section style="text-align:center;">
  <h1>top right</h1>
  some text about the top right
</section>

<section style="text-align:center;">
  <h1>top left</h1>
  some text about the top right
</section>

<section style="text-align:center;">
  <h1>bottom right</h1>
  some text about the top right
</section>

<section style="text-align:center;">
  <h1>middle</h1>
  some text about the top right
</section>

<div id='bot-padding'></div>

<script src="d3.v3.js"></script>
<script src="gscroll.js"></script>
<script>

var width = 800,
    oHeight = 150,
    sHeight = 100,
    sWidth = 150,
    colors = ["#f2f0f7","#cbc9e2","#9e9ac8","#756bb1","#54278f"],
    scroll = gscroll(),
    n = 150;

circleArrays = []
circleArrays[0] = d3.range(n).map(function(){
  return Math.random()*sHeight })
circleArrays[1] = d3.range(n).map(function(d){
  return sHeight/n*d + Math.random()*40 -5 })
circleArrays[2] = d3.range(n).map(function(d){
  return sHeight/n*d })
circleArrays[3] = d3.range(n).map(function(d){
  return n - sHeight/n*d + Math.random()*40 })

d3.select('#bot-padding')
    .style('height', window.innerHeight - oHeight - sHeight - 100 + 'px')


var svg = d3.select('#overlay')
  .append('svg')
    .attr({width: 800, height: oHeight})

svg.append('rect').attr({width: width, height: oHeight})
    .style('fill', 'rgb(250, 248, 248)')


var scatterG = svg.append('g')
    .attr('transform', 'translate(' + 50 + ',' + (oHeight - sHeight)/2 + ')')

var rects = scatterG.selectAll('rect')

var circles = scatterG.selectAll('circle')
    .data(circleArrays[0]).enter()
  .append('circle')
    .attr('r', 2)
    .attr('cx', function(d, i){ return i })
    .attr('cy', function(d, i){ return d })

scroll.on('active', function(i){

  circles.data(circleArrays[i])
    .transition().duration(1000)
      .attr('cy', function(d){ return d })
})

</script>